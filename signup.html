<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles/style.css">
        <title>Sign Up</title>
    
        <style>
            div.enter-form-grid-container {
                display: grid;
                grid-template-rows: repeat(11, 20px);
                grid-template-columns: repeat(2, 180px);
                grid-column-gap: 10px;
                grid-row-gap: 10px;
            }

            button {
                height: 1.9rem;
            }
        </style>
    </head>
    
    <body onload="initialise_time()">
        <header>
            <a href="index.html">GTrack</a>
            Set your Goals!
        </header>
        
        <div class="content">
            <div class="enter-form">
                <h2> Register </h2>
                <form action="">
                    <div class="enter-form-grid-container">
                        <label for="account-email">Email*: </label><input type="email" id="account-email">
                        <label id="account-email-valid"></label><br>
                        <label for="account-password">Password*: </label><input type="password" id="account-password">
                        <label id="account-password-valid"></label><br>
                        <label for="account-userid">User ID*: </label><input type="text" id="account-userid">
                        <label id="account-userid-valid"></label><br>
                        <label for="account-name">Name*: </label><input type="text" id="account-name">
                        <label id="account-name-valid"></label><br>
                        <label for="account-address">Address: </label><input type="text" id="account-address">
                        <label id="account-address-valid"></label><br>
                        <label for="account-country">Country*: </label><input type="text" id="account-country">
                        <label id="account-country-valid"></label><br>
                        <label for="account-zipcode">ZipCode*: </label><input type="text" id="account-zipcode">
                        <label id="account-zipcode-valid"></label><br>
                        <label for="account-sex">Sex*: </label>
                        <select name="sex-picker-select" id="account-sex">
                            <option value="male" selected>Male</option>
                            <option value="female">Female</option>
                        </select>
                        <label id="account-sex-valid"></label><br>
                        <label for="account-language">Language*: </label>
                        <select name="language-picker-select" id="account-lang">
                            <option lang="en" value="english" selected>English</option>
                            <option lang="es" value="italiano">Espanol</option>
                            <option lang="de" value="deutsch">Deutsch</option>
                            <option lang="fr" value="francais">Fran√ßais</option>
                        </select>
                        <label id="account-lang-valid"></label><br>
                        <label for="account-about">About me (Short): </label><input type="text" name="account-about">
                        <label id="account-about-valid"></label><br>
                        <br>
                        <button type="button" onclick="submmission()">Register</button>
                    </div>
                </form>
            </div>
            <div id="stat-result">
                
            </div>
        </div>

        <footer>
            <a id="footer-name" href="index.html">GTrack</a>
            <a href="">Facebook</a>
            <a href="">Instagram</a>
            <a href="">Twitter</a>
        </footer>

        <script>
            //Tracking behaviour 
            const date = new Date();

            let statistics = {
                total_clicks : 0,
                enter_time : 0,
                total_key_presses : 0,
                total_number_characters : 0,
                display : function() {
                    let current_date = new Date();
                    document.getElementById('stat-result').innerHTML = `
                        Statistics:
                        <br>
                        Total mouse clicks: ${this.total_clicks},
                        <br>
                        Time spent on a page : Minutes - ${Math.floor((current_date.getTime() - this.enter_time) / 60000)}, Seconds - ${Math.floor((current_date.getTime() - this.enter_time) / 1000)} ,
                        <br>
                        Total key presses: ${this.total_key_presses},
                        <br>
                        Total number of characters typed: ${[...document.getElementsByTagName('input')].reduce((acc, el) => acc + el.value.length, 0)},
                    `;
                }
            };

            function initialise_time() {
                statistics['enter_time'] = date.getTime();
            }
            document.addEventListener('click', function() { statistics['total_clicks']++; });
            document.addEventListener('keydown', function() { statistics['total_key_presses']++; });
            //Validation
            function validate_userid() {
                user_form = document.getElementById('account-userid');
                user_valid = document.getElementById('account-userid-valid');
                if (user_form.value.length < 5 || user_form.value.length > 12) {
                    user_valid.innerHTML="Incorrect size";
                }
                else {
                    user_valid.innerHTML="Perfect!";
                }
            }

            function validate() {
                validate_userid();
            }


            function submmission() {
                statistics.display();
                validate();
            }
        </script>
    </body>
</html>